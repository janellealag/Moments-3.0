<%- include('../../../templates/businessmanNavbar.ejs') -%>  
    <!--==========================
  Services Section
============================-->
  <section id="services">
    <div class="container wow fadeInUp">
      
        
      <div class="row">
        <!-- YOUR CODES HERE -->
		
  
    <div class="row">
        
<!--        <div class="col-6 col-md-6">-->
        
        <center>
         <h3 class="section-title">Items</h3>
              <div class="section-title-divider"></div>
            
           <div style="overflow-y: scroll; min-height:100;">
            <% if (re.length == 0 || re == 'undefined') { %>
                <h5>No Items</h5>
            <% } else {%>
            <table width="1000px" border="2px" align="center">
                <tr>
                    <th align="center">Item No.</th>
                    <th align="center">Item Name</th>
                    <th align="center">Estimated Price</th>
                    <th align="center">Actions</th>
                    <th align="center">Status</th>
                </tr>

                    <% re.forEach(function(i){ %>
                <tr>
<!--                    <form>-->
                    <td align="center"><%=i.intItemNo%></td>
                    <td align="center"><%= i.strItemName %></td>
                    <td align="center"><%= i.strEstimatedPrice %></td>
                    <td align="center"><button type="submit" class="viewButton btn btn-secondary btn-sm"  data-toggle="modal" data-target="#viewItem" data-itemname="<%= i.strItemName %>" data-itemprice="<%= i.strEstimatedPrice %>"  data-itemdesc="<%= i.strItemDescription %>" data-itemavailabledays="<%=i.strItemAvailableDay%>" data-vitemrefund="<%=i.decItemRefundPercentage%>">Other Details</button>
                        
                    <button type="submit" class="editItem btn btn-secondary btn-sm" data-toggle="modal" data-target="#editItem" data-itemname="<%= i.strItemName %>" data-itemprice="<%= i.strEstimatedPrice %>"  data-itemdesc="<%= i.strItemDescription %>" data-itemno="<%=i.intItemNo%>" data-eitemavailabledays="<%=i.strItemAvailableDay%>" data-eitemrefund="<%=i.decItemRefundPercentage%>">Edit</button>
                    
                    
                   
                    </td>
                    <td>
                    	<center>
                    	<% if(i.intItemStatus == 1) { %>
                        <button type="submit"  class="inactivateitem btn btn-secondary btn-sm" data-toggle="modal" data-target="#inactivateItem" data-itemnum="<%=i.intItemNo%>" >Active</button>
                    <% } %>
                    <% if(i.intItemStatus == 0) { %>
                        <button type="submit" data-toggle="modal" data-target="#activateItem" data-itemnum2="<%= i.intItemNo %>" class="activateitem btn btn-secondary btn-sm">Inactive</button>
                    <% } %>
                    	</center>
                    </td>
                   
                </tr>
                    <% }); %>
              
            </table>
            <% } %> 
            </div>
            </center>

    </div>
    
    <br>
    <div class="row">
          
        <center>
		 <h3 class="section-title">Services</h3>
          <div class="section-title-divider"></div>
        
        <div style="overflow-y: scroll;min-height:200;">
        <% if (se.length==0 || se=='underfined'){%>
        <h5>No Services</h5>
        <% } else{%>
        <table width="1000px" border="2px" align="center">
            <tr>
                <th>Service No.</th>
                <th>Service Name</th>
                <th>Estimated Price</th>
                <th>Actions</th>
                <th>Status</th>
            </tr>
            <% se.forEach(function(i){ %>
            <tr style="border: 1px solid #ddd;">
                
                <td align="center"><%=i.intGenServiceNo%></td>
                <td align="center"><%= i.strServiceName %></td>
                <td align="center"><%= i.strEstimatedPrice %></td>
                <td align="center"><button type="submit"  class="viewService btn btn-secondary btn-sm" data-toggle="modal" data-target="#viewService" data-servicename="<%= i.strServiceName %>" data-serviceprice="<%=i.strEstimatedPrice%>" data-servicedesc="<%=i.strServiceDescription%>" data-servicerefund="<%=i.decServiceRefundPercentage%>" data-serviceavailabledays="<%=i.strServiceAvailableDay%>" >Other Details</button>
                    
				<button type="submit" class="editService btn btn-secondary btn-sm" data-toggle="modal" data-target="#editService" data-eserviceno="<%=i.intGenServiceNo%>" data-eservicename="<%=i.strServiceName%>" data-eserviceprice="<%=i.strEstimatedPrice%>" data-eservicedescription="<%=i.strServiceDescription%>" data-eserviceavailabledays="<%=i.strServiceAvailableDay%>" data-eservicerefund="<%=i.decServiceRefundPercentage%>" >Edit</button>
                
                
                    
                </td>
               	<td>
               		<center>
               		<% if(i.intGenServiceStatus == 1) { %>
                        <button type="submit" data-toggle="modal" data-target="#inactivateService" data-servicenum="<%=i.intGenServiceNo%>"  class="inactivateservice btn btn-secondary btn-sm">Active</button>
                <% } %>
                <% if(i.intGenServiceStatus == 0) { %>
                        <button type="submit" data-toggle="modal" data-target="#activateService" data-servicenum="<%=i.intGenServiceNo%>" class="activateservice btn btn-secondary btn-sm">Inactive</button>
                <% } %>	
                	</center>
               	</td>
            
                
            </tr>
            <% }); %>
        </table>
        <% }%>
        </div>
        </center>
        
	</div>
	<!-- END OF YOUR CODES -->
      </div>
    </div> 
  </section>

    <!--==========================
  modal for inactivate item
============================-->  
<div class="modal fade" id="inactivateItem" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
			<h3 class="modal-title" id="lineModalLabel"></h3>
		</div>
		<div class="modal-body">
			<form>
            <input type="hidden" name="ino" id="ino">
            <h2><strong>Do you want to deactivate this item?</strong></h2>

                <button type="submit" class="btn btn-services" formmethod="post" formaction="/businessman/inactivateItem"  >Yes</button>
               <button type="button" class="btn btn-services" data-dismiss="modal"  >No</button>
            </form>
		</div>
	</div>
  </div>
</div>

    <!--==========================
  modal for activate item
============================-->  
<div class="modal fade" id="activateItem" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
			<h3 class="modal-title" id="lineModalLabel"></h3>
		</div>
		<div class="modal-body">
			<form>
            <input type="hidden" name="ino2" id="ino2">
            <h3><strong>Do you want to activate this item?</strong></h3>

                <button type="submit" class="btn btn-services" formmethod="post" formaction="/businessman/activateItem"  >Yes</button>
               <button type="button" class="btn btn-services" data-dismiss="modal"  >No</button>
            </form>
		</div>
	</div>
  </div>
</div>


    <!--==========================
  modal for activate service
============================-->  
<div class="modal fade" id="activateService" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
			<h3 class="modal-title" id="lineModalLabel"></h3>
		</div>
		<div class="modal-body">
			<form>
            <input type="hidden" name="sno2" id="sno2">
            <h3><strong>Do you want to activate this item?</strong></h3>

                <button type="submit" class="btn btn-services" formmethod="post" formaction="/businessman/activateService"  >Yes</button>
               <button type="button" class="btn btn-services" data-dismiss="modal"  >No</button>
            </form>
		</div>
	</div>
  </div>
</div>

    <!--==========================
  modal for inactivate service
============================-->  
<div class="modal fade" id="inactivateService" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
			<h3 class="modal-title" id="lineModalLabel"></h3>
		</div>
		<div class="modal-body">
			<form>
            <input type="hidden" name="sno" id="sno">
            <h3><strong>Do you want to deactivate this item?</strong></h3>

                <button type="submit" class="btn btn-services" formmethod="post" formaction="/businessman/inactivateService"  >Yes</button>
               <button type="button" class="btn btn-services" data-dismiss="modal"  >No</button>
            </form>
		</div>
	</div>
  </div>
</div>
  
    <!--==========================
  modal for view item
============================-->  
<div class="modal fade" id="viewItem" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
			<h3 class="modal-title" id="lineModalLabel">YOUR ITEM</h3>
		</div>
		<div class="modal-body">
			<form>
              <div class="form-group">
				
				<label for="ItemName">Item Name</label>
                <input type="text" class="form-control" id="ItemNames" placeholder="" readonly>
				<br>
				<label for="ItemPrice">Item Price</label>
                <input type="text" class="form-control" id="ItemPrices" placeholder="" min=1 readonly>
				<br>
				<label for="Description">Item Description</label>
                <textarea  style=" resize: none;" class="form-control" id="ItemDescription"  readonly></textarea>
				<br>
				<label for="">Refund Percentage</label>
  
                <label for="itemrefund">Refund Percentage</label>
                <input type="number" class="form-control" id="itemrefund" placeholder="" readonly>
				<br>
				
				<label for="">Available Day</label>
				<br>
				<div align="center">
                <input type="checkbox" name="days" id="MO" value="MO">Mon &nbsp;&nbsp;
				<input type="checkbox" name="days" id="TU" value="TU">Tue &nbsp;&nbsp;
				<input type="checkbox" name="days" id="WE" value="WE">Wed &nbsp;&nbsp;
				<input type="checkbox" name="days" id="TH" value="TH">Thu &nbsp;&nbsp;
				<input type="checkbox" name="days" id="FR" value="FR">Fri &nbsp;&nbsp;
				<input type="checkbox" name="days" id="SA" value="SA">Sat &nbsp;&nbsp;
				<input type="checkbox" name="days" id="SU" value="SU">Sun &nbsp;&nbsp;
				</div><br>
				<br>
				

               <button type="button" class="btn btn-services" data-dismiss="modal"  >Okay</button>
            </form>
		</div>
	</div>
  </div>
</div>
</div>
    <!--==========================
  modal for view service
============================-->  
<div class="modal fade" id="viewService" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
			<h3 class="modal-title" id="lineModalLabel">YOUR SERVICE</h3>
		</div>
		<div class="modal-body">
			<form>
              <div class="form-group">
				
				<label for="ServiceName">Service Name</label>
                <input type="text" class="form-control" id="ServiceName" placeholder="" readonly>
				<br>
				<label for="ServicePrice">Service Price</label>
                <input type="text" class="form-control" id="ServicePrice" placeholder="" min=1 readonly>
				<br>
				<label for="Description">Service Description</label>
                <textarea  style=" resize: none;" class="form-control" id="ServiceDescription" placeholder="What's the specification/condition of your item?" readonly></textarea>
				<br>
				<label for="">Refund Percentage</label>
  

				<label for="servicerefund">Refund Percentage</label>
                <input type="number" class="form-control" id="servicerefund" placeholder="" readonly>
				<br>
                  
				<label for="">Available Day</label>
				<br>
				<div align="center">
                <input type="checkbox" name="days" id="sMO" value="MO">Mon &nbsp;&nbsp;
				<input type="checkbox" name="days" id="sTU" value="TU">Tue &nbsp;&nbsp;
				<input type="checkbox" name="days" id="sWE" value="WE">Wed &nbsp;&nbsp;
				<input type="checkbox" name="days" id="sTH" value="TH">Thu &nbsp;&nbsp;
				<input type="checkbox" name="days" id="sFR" value="FR">Fri &nbsp;&nbsp;
				<input type="checkbox" name="days" id="sSA" value="SA">Sat &nbsp;&nbsp;
				<input type="checkbox" name="days" id="sSU" value="SU">Sun &nbsp;&nbsp;
				</div><br>
				<br>
				

              <button type="button" class="btn btn-services" data-dismiss="modal"  >Okay</button>
            </form>
		</div>
	</div>
  </div>
</div>
</div>
<!--==========================
  modal for Edit item
============================-->  
<div class="modal fade" id="editItem" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
			<h3 class="modal-title" id="lineModalLabel">EDIT YOUR ITEM</h3>
		</div>
		<div class="modal-body">
			<form>
              <div class="form-group">
                <input type="hidden" class="form-control" id="eItemNo" name="eItemNoo" placeholder="" readonly>
				<br>
				<label for="ItemName">Item Name</label>
                <input type="text" class="form-control" id="eItemName" name="eItemName" placeholder="" readonly>
				<br>
				<label for="ItemPrice">Item Price</label>
                <input type="text" class="form-control" id="eItemPrice" name="eItemPrice" placeholder="" min=1 required>
				<br>
				<label for="Description">Item Description</label>
                <textarea  style=" resize: none;" class="form-control" id="eItemDescription" name="eItemDescription" placeholder="What's the specification/condition of your item?" required></textarea>
				<br>
				<label for="">Refund Percentage</label>
  
				
				<script>
				function updateSlidert(slideAmountt) {
				var sliderDiv = document.getElementById("sliderAmountt");
				sliderDiv.innerHTML = parseInt(slideAmountt*100)+"% will be refunded by the event organizers if their reservation is cancelled.";
				}
				</script>
				<input id="eitemrefund" name="eitemrefund" type="range" min="0.00" max="1.00" step="0.01" value="" onchange="updateSlidert(this.value)" required>
				<div id="sliderAmountt" ></div>​
				<br>
				
				<label for="">Available Day</label>
				<br>
				<div align="center">
                <input type="checkbox" name="days" id="eiMO" value="MO"  >Mon &nbsp;&nbsp;
				<input type="checkbox" name="days" id="eiTU" value="TU"  >Tue &nbsp;&nbsp;
				<input type="checkbox" name="days" id="eiWE" value="WE"  >Wed &nbsp;&nbsp;
				<input type="checkbox" name="days" id="eiTH" value="TH"  >Thu &nbsp;&nbsp;
				<input type="checkbox" name="days" id="eiFR" value="FR"  >Fri &nbsp;&nbsp;
				<input type="checkbox" name="days" id="eiSA" value="SA"  >Sat &nbsp;&nbsp;
				<input type="checkbox" name="days" id="eiSU" value="SU"  >Sun &nbsp;&nbsp;
				</div><br>
				<br>
			

              <button type="submit"  onclick="return confirm('Do you want to proceed?');" class="btn btn-services" formmethod="post" formaction="/businessman/editItem" >Save Changes</button>
				<button type="submit" class="btn btn-services"  data-dismiss="modal">Cancel</button>
           </div>
        </form>
		
	</div>
  </div>
</div>
</div>
<!--==========================
  modal for edit service
============================-->  
<div class="modal fade" id="editService" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
			<h3 class="modal-title" id="lineModalLabel">EDIT YOUR SERVICE</h3>
		</div>
		<div class="modal-body">
			<form >
              <div class="form-group">
                  
				<input type="hidden" class="form-control" id="eserviceno" name="eserviceno" placeholder="" readonly>
				<br>
				<label for="serviceName">Service Name</label>
                <input type="text" class="form-control" id="eservicename" name="eservicename" placeholder="" required>
				<br>
				<label for="eserviceprice">Service Price</label>
                <input type="text" class="form-control" id="eserviceprice" name="eserviceprice" placeholder="" min=1 required>
				<br>
				<label for="Description">Service Description</label>
                <textarea style=" resize: none;"  class="form-control" id="eservicedescription" name="eservicedescription" placeholder="What included on the Service?(eg. For Music Entertainment Service: 1 singer, 1 microphone, 2 speakers, and 1 piano." required></textarea>
				<br>
				<label for="">Refund Percentage</label>  
				
			<script>
				function updateSlidersr(slideAmountr) {
				var sliderDiv = document.getElementById("sliderAmountsc");
				sliderDiv.innerHTML = parseInt(slideAmountr*100)+"% will be refunded by the event organizers if their reservation is cancelled.";
				}
				</script>
				<input id="eservicerefund" name="eservicerefund" type="range" min="0.00" max="1.00" step="0.01" value="75" onchange="updateSlidersr(this.value)" required>
				<div id="sliderAmountsc" ></div>​
				<br>
				
				<label for="">Available Day</label>
				<br>
				<div align="center">
                <input type="checkbox" name="days" id="esMO" value="MO" >Mon &nbsp;&nbsp;
				<input type="checkbox" name="days" id="esTU" value="TU">Tue &nbsp;&nbsp;
				<input type="checkbox" name="days" id="esWE" value="WE">Wed &nbsp;&nbsp;
				<input type="checkbox" name="days" id="esTH" value="TH">Thu &nbsp;&nbsp;
				<input type="checkbox" name="days" id="esFR" value="FR">Fri &nbsp;&nbsp;
				<input type="checkbox" name="days" id="esSA" value="SA">Sat &nbsp;&nbsp;
				<input type="checkbox" name="days" id="esSU" value="SU">Sun &nbsp;&nbsp;
				</div><br>
				
			
              <button type="submit" onclick="return confirm('Do you want to proceed?');" class="btn btn-services" formmethod="post" formaction="/businessman/editService">Save Changes</button>
				<button type="Submit" class="btn btn-services"  data-dismiss="modal">Cancel</button>
            </form>
		</div>
	</div>
  </div>
</div>
</div>



  <%- include('../../../templates/footer.ejs') -%>
    

      
      <script>
          
          $('.inactivateitem').on('click', function(){
              $('#ino').val($(this).data('itemnum'))
          })
          $('.activateitem').on('click', function(){
              $('#ino2').val($(this).data('itemnum2'))
          })
          $('.activateservice').on('click', function(){
              $('#sno2').val($(this).data('servicenum'))
          })
          $('.inactivateservice').on('click', function(){
              $('#sno').val($(this).data('servicenum'))
          })
          
          
          
     
          $('.viewButton').on('click',function(){
              $('#ItemNames').val($(this).data('itemname'))
              $('#ItemPrices').val($(this).data('itemprice'))
              $('#ItemDescription').text($(this).data('itemdesc'))
             
              $('#vitemrefund').val($(this).data('vitemrefund'))
              $('#itemrefund').val($(this).data('vitemrefund')*100)
            var t = ($(this).data('itemavailabledays')).split(",")
//            var count = 0;
            for(j=0; j<t.length; j++){
//                count++;
//                alert($('#MO').val())
                if ($('#MO').val() == t[j]){
                    $('#MO').attr('checked','checked')
                }
                if ($('#TU').val() == t[j]){
                    $('#TU').attr('checked','checked')
                }
                if ($('#WE').val() == t[j]){
                    $('#WE').attr('checked','checked')
                }
                if ($('#TH').val() == t[j]){
                    $('#TH').attr('checked','checked')
                }
                if ($('#FR').val() == t[j]){
                    $('#FR').attr('checked','checked')
                }
                if ($('#SA').val() == t[j]){
                    $('#SA').attr('checked','checked')
                }
                if ($('#SU').val() == t[j]){
                    $('#SU').attr('checked','checked')
                }
            } 
              
          })
          
          $('.viewService').on('click', function(){
              $('#ServiceName').val($(this).data('servicename'))
              $('#ServicePrice').val($(this).data('serviceprice'))
              $('#ServiceDescription').val($(this).data('servicedesc'))
              $('#vservicerefund').val($(this).data('servicerefund'))
              $('#servicerefund').val($(this).data('servicerefund')*100)
              var s = ($(this).data('serviceavailabledays')).split(",")
//            var count = 0;
            for(j=0; j<s.length; j++){
//                count++;
//                alert($('#MO').val())
                if ($('#sMO').val() == s[j]){
                    $('#sMO').attr('checked','checked')
                }
                if ($('#sTU').val() == s[j]){
                    $('#sTU').attr('checked','checked')
                }
                if ($('#sWE').val() == s[j]){
                    $('#sWE').attr('checked','checked')
                }
                if ($('#sTH').val() == s[j]){
                    $('#sTH').attr('checked','checked')
                }
                if ($('#sFR').val() == s[j]){
                    $('#sFR').attr('checked','checked')
                }
                if ($('#sSA').val() == s[j]){
                    $('#sSA').attr('checked','checked')
                }
                if ($('#sSU').val() == s[j]){
                    $('#sSU').attr('checked','checked')
                }
            } 
          })
          
          $('.editItem').on('click',function(){
              $('#eItemName').val($(this).data('itemname'))
              $('#eItemNo').val($(this).data('itemno'))
              $('#eItemPrice').val($(this).data('itemprice'))
              $('#eItemDescription').text($(this).data('itemdesc'))
               $('#eitemrefund').val($(this).data('eitemrefund'))
             
              var w = ($(this).data('eitemavailabledays')).split(",")
//            var count = 0;
            for(j=0; j<w.length; j++){
//                count++;
//                alert($('#MO').val())
                if ($('#eiMO').val() == w[j]){
                    $('#eiMO').attr('checked','checked')
                }
                if ($('#eiTU').val() == w[j]){
                    $('#eiTU').attr('checked','checked')
                }
                if ($('#eiWE').val() == w[j]){
                    $('#eiWE').attr('checked','checked')
                }
                if ($('#eiTH').val() == w[j]){
                    $('#eiTH').attr('checked','checked')
                }
                if ($('#eiFR').val() == w[j]){
                    $('#eiFR').attr('checked','checked')
                }
                if ($('#eiSA').val() == w[j]){
                    $('#eiSA').attr('checked','checked')
                }
                if ($('#eiSU').val() == w[j]){
                    $('#eiSU').attr('checked','checked')
                }
            }
          })
          $('.editService').on('click',function(){
              $('#eservicename').val($(this).data('eservicename'))
              $('#eserviceno').val($(this).data('eserviceno'))
              $('#eserviceprice').val($(this).data('eserviceprice'))
              $('#eservicedescription').text($(this).data('eservicedescription'))
              $('#eservicerefund').val($(this).data('eservicerefund'))
            var w = ($(this).data('eserviceavailabledays')).split(",")
//            var count = 0;
            for(j=0; j<w.length; j++){
//                count++;
//                alert($('#MO').val())
                if ($('#esMO').val() == w[j]){
                    $('#esMO').attr('checked','checked')
                }
                if ($('#esTU').val() == w[j]){
                    $('#esTU').attr('checked','checked')
                }
                if ($('#esWE').val() == w[j]){
                    $('#esWE').attr('checked','checked')
                }
                if ($('#esTH').val() == w[j]){
                    $('#esTH').attr('checked','checked')
                }
                if ($('#esFR').val() == w[j]){
                    $('#esFR').attr('checked','checked')
                }
                if ($('#esSA').val() == w[j]){
                    $('#esSA').attr('checked','checked')
                }
                if ($('#esSU').val() == w[j]){
                    $('#esSU').attr('checked','checked')
                }
            }
          })
          
      </script>

<% if (success == 1 ) { %>
        <script>swal("Success!","You Successfully Added", "success");</script>
    <% } %>